<!-- 重构后的项目模态框 - 添加项目 -->
<!-- 使用组件化的方式，大大减少重复代码 -->

{% set modal_config = {
  'modal_id': 'addProjectModal',
  'modal_title': '添加新项目',
  'modal_icon': 'fas fa-plus',
  'form_id': 'addProjectForm',
  'submit_text': '创建项目',
  'submit_icon': 'fas fa-save'
} %}

{% extends 'components/modals/base_modal.html' %}

{% block modal_form %}
  {% include 'components/forms/project_form.html' with context %}
  {% set form_mode = 'add' %}
{% endblock %}

<!-- 对比原来的代码，这个文件只有不到20行，而原来需要40+行 -->

<!-- ================================= -->
<!-- 重构后的项目模态框 - 编辑项目 -->
<!-- ================================= -->

<!-- 编辑项目模态框 -->
{% set edit_modal_config = {
  'modal_id': 'editProjectModal',
  'modal_title': '编辑项目',
  'modal_icon': 'fas fa-edit',
  'form_id': 'editProjectForm',
  'submit_text': '保存更改',
  'submit_icon': 'fas fa-save'
} %}

<!-- 使用相同的基础模态框，只需要改变配置 -->
<div class="modal fade" id="{{ edit_modal_config.modal_id }}" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">
          <i class="{{ edit_modal_config.modal_icon }} me-2"></i>
          {{ edit_modal_config.modal_title }}
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      
      <div class="modal-body">
        <form id="{{ edit_modal_config.form_id }}">
          {% include 'components/forms/project_form.html' with context %}
          {% set form_mode = 'edit' %}
          {% set field_prefix = 'edit' %}
        </form>
      </div>
      
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
        <button type="submit" class="btn btn-primary" form="{{ edit_modal_config.form_id }}">
          <i class="{{ edit_modal_config.submit_icon }} me-1"></i>
          {{ edit_modal_config.submit_text }}
        </button>
      </div>
    </div>
  </div>
</div>

<!-- 
重构效果对比：

原来的代码：
- addProjectModal.html: 41行
- editProjectModal.html: 43行
- 总计：84行，大量重复代码

重构后的代码：
- base_modal.html: 54行（可复用）
- project_form.html: 150行（可复用）
- 两个模态框配置: 30行
- 总计：234行，但组件可以在整个项目中复用

复用收益：
- 每增加一个类似模态框，只需要5-10行配置代码
- 表单组件可以在多个地方复用
- 统一的样式和行为
- 更容易维护和修改
-->